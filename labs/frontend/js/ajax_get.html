<!DOCTYPE html>
<html>
<body>
	<h2>AJAX Client - GET Request</h2>
	<div id="getUsers">
		<!-- https://reqres.in/api/users -->
		<button type="button" onclick="loadDoc('http://localhost:8080/sboot-rest-labs/greetings1', myFunction)">Get Users</button>
	</div>
	<br>
	<div id="getUser">
		<button type="button" onclick="loadDoc('https://reqres.in/api/users/1', myFunction)">Get User</button>
	</div>	
	<br>
	<div id="output">
	</div>	

	<script>
		function loadDoc(url, cFunction) {
			var xhttp;
			xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				console.log(`ReadyStateCode: ${this.readyState}, StatusCode: ${this.status} ` )
				if (this.readyState == 4 && this.status == 200) {
					cFunction(this);
				}
			};	
			xhttp.open("GET", url, true);
			xhttp.setRequestHeader("Accept", "application/json");
			xhttp.send();
		}

		// Callback function to process the response
		function myFunction(xhttp) {
			var reqData = JSON.parse(xhttp.responseText);
			console.log(reqData);
			var dataStr = JSON.stringify(reqData);
			document.getElementById("output").innerHTML = dataStr;			
		}
	</script>
</body>
</html>
